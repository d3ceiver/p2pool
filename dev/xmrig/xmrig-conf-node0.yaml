apiVersion: apps/v1
kind: Deployment
metadata:
  name: xmrig-exec
  namespace: miners
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: >
      {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"xmrig-exec","namespace":"miners"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"xmrig-exec"}},"template":{"metadata":{"labels":{"app":"xmrig-exec"}},"spec":{"containers":[{"name":"xmrig-container","image":"busybox","command":["/home/manager/xmrig/build/xmrig"],"volumeMounts":[{"name":"xmrig-volume","mountPath":"/"}]}],"volumes":[{"name":"xmrig-volume","hostPath":{"path":"/"}}]}}}}
spec:
  replicas: 1
  selector:
    matchLabels:
      app: xmrig-exec
  template:
    metadata:
      labels:
        app: xmrig-exec
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: kubernetes.io/hostname
                operator: In
                values:
                - master
      containers:
        - name: xmrig-container
          image: busybox
          imagePullPolicy: Always
          command:
            - /home/manager/xmrig/build/xmrig
          volumeMounts:
            - name: xmrig-volume
              mountPath: /
      volumes:
        - name: xmrig-volume
          hostPath:
            path: /
