apiVersion: batch/v1
kind: Job
metadata:
  name: clock-reset-job
  namespace: p2pool
spec:
  template:
    spec:
      containers:
        - name: clock-reset-container
          image: busybox  # Use any base image since we'll use a custom script
          command: ["sh"]
          args:
            - "-c"
            - |
              clock=0  # Initialize clock
              while [ $clock -lt 180 ]; do
                echo "Clock count: $clock"  # Print the clock count
                sleep 1  # Sleep for 1 second
                ((clock++))  # Increment clock
              done
              clock=0  # Reset clock after loop exits
          volumeMounts:
            - name: p2pool
              mountPath: /root/p2pool/p2pool
      volumes:
        - name: p2pool
          hostPath:
            path: /home/worker3/p2pool/p2pool
            type: File
  backoffLimit: 1

